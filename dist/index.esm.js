import{createStore as t}from"redux";import{patchStore as e,useTrackedState as r}from"reactive-react-redux";import n,{useCallback as a}from"react";var o=function(r){var n=t(function(t,e){return void 0===t&&(t=r),e&&"SetState"===e.type?"function"==typeof e.setState?e.setState(t):e.setState:t});return{patchedStore:e(n)}},c=function(t){return[r(t.patchedStore),a(function(e){t.patchedStore.dispatch({type:"SetState",setState:e})},[t])]},i=function(t){return n.createElement(n.Fragment,null,t.children)};function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var S=Symbol(),p=function(t){return u(u({},o(t.default)),{},{symbol:S,key:t.key,initialState:t.default,writable:!0})},s=function(t){var e=[],r=[],n=function(t){return e.includes(t)||(e.push(t),r.push(t.patchedStore.subscribe(s))),t.patchedStore.getState()},a=function(t){return t.patchedStore.getState()},c=function(t,e){t.patchedStore.dispatch({type:"SetState",setState:e})},i=o(null),p=i.patchedStore.dispatch,s=function(){try{return Promise.resolve(t.get({get:n})).then(function(t){p({type:"SetState",setState:t})})}catch(t){return Promise.reject(t)}},f=i.patchedStore.subscribe,h=0;return i.patchedStore.subscribe=function(t){var n=f(t);return 0===h&&s(),h+=1,function(){n(),0==(h-=1)&&(r.forEach(function(t){return t()}),r.splice(0,r.length),e.splice(0,e.length))}},i.patchedStore.dispatch=function(e){if("SetState"===e.type){if("function"==typeof e.setState)throw new Error("function update is not allowed");if(!t.set)throw new Error("not writable selector");t.set({get:a,set:c},e.setState)}return e},u(u({},i),{},{symbol:S,key:t.key,initialState:null,writable:!!t.set})},f=function(t){try{return t.symbol===S}catch(t){return!1}},h=c,l=function(t){return r(t.patchedStore)},d=function(t){return a(function(e){t.patchedStore.dispatch({type:"SetState",setState:e})},[t])},y=function(t){return a(function(){t.patchedStore.dispatch({type:"SetState",setState:t.initialState})},[t])};export{i as RecoilRoot,p as atom,o as createAtom,f as isRecoilValue,s as selector,c as useAtom,h as useRecoilState,l as useRecoilValue,y as useResetRecoilState,d as useSetRecoilState};
//# sourceMappingURL=index.esm.js.map
