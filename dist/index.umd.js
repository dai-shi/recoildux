!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("redux"),require("reactive-react-redux"),require("react")):"function"==typeof define&&define.amd?define(["exports","redux","reactive-react-redux","react"],e):e((t=t||self).recoildux={},t.redux,t.reactiveReactRedux,t.react)}(this,function(t,e,r,n){var a="default"in n?n.default:n,c=function(t){var n=e.createStore(function(e,r){return void 0===e&&(e=t),r&&"SetState"===r.type?"function"==typeof r.setState?r.setState(e):r.setState:e});return{patchedStore:r.patchStore(n)}},o=function(t){return[r.useTrackedState(t.patchedStore),n.useCallback(function(e){t.patchedStore.dispatch({type:"SetState",setState:e})},[t])]};function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var i=Symbol(),s=o;t.RecoilRoot=function(t){return a.createElement(a.Fragment,null,t.children)},t.atom=function(t){return u(u({},c(t.default)),{},{symbol:i,key:t.key,initialState:t.default,writable:!0})},t.createAtom=c,t.isRecoilValue=function(t){try{return t.symbol===i}catch(t){return!1}},t.selector=function(t){var e=[],r=[],n=function(t){return e.includes(t)||(e.push(t),r.push(t.patchedStore.subscribe(S))),t.patchedStore.getState()},a=function(t){return t.patchedStore.getState()},o=function(t,e){t.patchedStore.dispatch({type:"SetState",setState:e})},s=c(null),l=s.patchedStore.dispatch,S=function(){try{return Promise.resolve(t.get({get:n})).then(function(t){l({type:"SetState",setState:t})})}catch(t){return Promise.reject(t)}},f=s.patchedStore.subscribe,p=0;return s.patchedStore.subscribe=function(t){var n=f(t);return 0===p&&S(),p+=1,function(){n(),0==(p-=1)&&(r.forEach(function(t){return t()}),r.splice(0,r.length),e.splice(0,e.length))}},s.patchedStore.dispatch=function(e){if("SetState"===e.type){if("function"==typeof e.setState)throw new Error("function update is not allowed");if(!t.set)throw new Error("not writable selector");t.set({get:a,set:o},e.setState)}return e},u(u({},s),{},{symbol:i,key:t.key,initialState:null,writable:!!t.set})},t.useAtom=o,t.useRecoilState=s,t.useRecoilValue=function(t){return r.useTrackedState(t.patchedStore)},t.useResetRecoilState=function(t){return n.useCallback(function(){t.patchedStore.dispatch({type:"SetState",setState:t.initialState})},[t])},t.useSetRecoilState=function(t){return n.useCallback(function(e){t.patchedStore.dispatch({type:"SetState",setState:e})},[t])}});
//# sourceMappingURL=index.umd.js.map
