var t,e=require("redux"),r=require("reactive-react-redux"),n=require("react"),a=(t=n)&&"object"==typeof t&&"default"in t?t.default:t,o=function(t){var n=e.createStore(function(e,r){return void 0===e&&(e=t),r&&"SetState"===r.type?"function"==typeof r.setState?r.setState(e):r.setState:e});return{patchedStore:r.patchStore(n)}},c=function(t){return[r.useTrackedState(t.patchedStore),n.useCallback(function(e){t.patchedStore.dispatch({type:"SetState",setState:e})},[t])]};function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}var i=Symbol(),s=c;exports.RecoilRoot=function(t){return a.createElement(a.Fragment,null,t.children)},exports.atom=function(t){return u(u({},o(t.default)),{},{symbol:i,key:t.key,initialState:t.default,writable:!0})},exports.createAtom=o,exports.isRecoilValue=function(t){try{return t.symbol===i}catch(t){return!1}},exports.selector=function(t){var e=[],r=[],n=function(t){return e.includes(t)||(e.push(t),r.push(t.patchedStore.subscribe(p))),t.patchedStore.getState()},a=function(t){return t.patchedStore.getState()},c=function(t,e){t.patchedStore.dispatch({type:"SetState",setState:e})},s=o(null),S=s.patchedStore.dispatch,p=function(){try{return Promise.resolve(t.get({get:n})).then(function(t){S({type:"SetState",setState:t})})}catch(t){return Promise.reject(t)}},l=s.patchedStore.subscribe,f=0;return s.patchedStore.subscribe=function(t){var n=l(t);return 0===f&&p(),f+=1,function(){n(),0==(f-=1)&&(r.forEach(function(t){return t()}),r.splice(0,r.length),e.splice(0,e.length))}},s.patchedStore.dispatch=function(e){if("SetState"===e.type){if("function"==typeof e.setState)throw new Error("function update is not allowed");if(!t.set)throw new Error("not writable selector");t.set({get:a,set:c},e.setState)}return e},u(u({},s),{},{symbol:i,key:t.key,initialState:null,writable:!!t.set})},exports.useAtom=c,exports.useRecoilState=s,exports.useRecoilValue=function(t){return r.useTrackedState(t.patchedStore)},exports.useResetRecoilState=function(t){return n.useCallback(function(){t.patchedStore.dispatch({type:"SetState",setState:t.initialState})},[t])},exports.useSetRecoilState=function(t){return n.useCallback(function(e){t.patchedStore.dispatch({type:"SetState",setState:e})},[t])};
//# sourceMappingURL=index.js.map
